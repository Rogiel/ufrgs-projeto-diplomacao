terran_units = {
    'TerranInfantryWeaponsLevel1': {},
    'TerranInfantryWeaponsLevel2': {},
    'TerranInfantryWeaponsLevel3': {},
    'TerranInfantryArmorsLevel1': {},
    'TerranInfantryArmorsLevel2': {},
    'TerranInfantryArmorsLevel3': {},
    'PersonalCloaking': {
        'tag': ['upgrade-tech'],
        'replay-label': 'Cloak'
    },
    'TerranVehicleWeaponsLevel1': {},
    'TerranVehicleWeaponsLevel2': {},
    'TerranVehicleWeaponsLevel3': {},
    'TerranVehicleAndShipArmorsLevel1': {},
    'TerranVehicleAndShipArmorsLevel2': {},
    'TerranVehicleAndShipArmorsLevel3': {},
    'DrillClaws': {},
    'LiberatorAGRangeUpgrade': {},
    'TerranShipWeaponsLevel1': {},
    'TerranShipWeaponsLevel2': {},
    'TerranShipWeaponsLevel3': {},
    'BansheeCloak': {
        'tag': ['upgrade-tech'],
        'replay-label': 'Cloak'
    },
    'BansheeSpeed': {
        'tag': ['upgrade-tech'],
        'replay-label': 'Speed'
    },
    'RavenCorvidReactor': {},
    'RavenDamageUpgrade': {},
    'BattlecruiserEnableSpecializations': {},
    'BattlecruiserBehemothReactor': {},
    'HighCapacityBarrels': {},
    'CycloneLockOnDamageUpgrade': {},
    'MedivacIncreaseSpeedBoost': {},
    'Stimpack': {},
    'ShieldWall': {},
    'PunisherGrenades': {},
    'TerranBuildingArmor': {},
    'NeosteelFrame': {},
    'HiSecAutoTracking': {},

    'Ghost': {
        'tag': ['support']
    },
    'Nuke': {},
    # 'MULE': {},
    'WidowMine': {
        'tag': ['support']
    },
    'Liberator': {
        'tag': ['support']
    },
    'Banshee': {
        'tag': ['tech']
    },
    'Raven': {},
    'Battlecruiser': {
        'tag': ['tech']
    },
    'Thor': {
        'tag': ['tech']
    },
    'SiegeTank': {
        'tag': ['support']
    },
    'VikingAssault': {},
    'Reaper': {
        'tag': ['tech']
    },
    'VikingFighter': {},
    'Hellion': {
        'tag': ['tech']
    },
    'Cyclone': {
        'tag': ['tech']
    },
    'Medivac': {
        'tag': ['support']
    },
    'SCV': {},
    'Marine': {
        'tag': ['bulk']
    },
    'BattleHellion': {},
    'Marauder': {
        'tag': ['bulk']
    },

    'GhostAcademy': {},
    'FusionCore': {},
    'FactoryTechLab': {},
    'FactoryReactor': {},
    'StarportTechLab': {},
    'BarracksTechLab': {},
    'SensorTower': {},
    'Factory': {},
    'Refinery': {},
    'Starport': {},
    'SupplyDepot': {},
    'StarportReactor': {},
    'CommandCenter': {},
    'Bunker': {},
    'EngineeringBay': {},
    'OrbitalCommand': {},
    'Barracks': {},
    'Armory': {},
    'MissileTurret': {},
    'BarracksReactor': {},
    'PlanetaryFortress': {},
}

zerg_units = {
    'ZergMeleeWeaponsLevel1': {},
    'ZergMeleeWeaponsLevel2': {},
    'ZergMeleeWeaponsLevel3': {},
    'ZergGroundArmorsLevel1': {},
    'ZergGroundArmorsLevel2': {},
    'ZergGroundArmorsLevel3': {},
    'Burrow': {
        'tag': ['upgrade-tech'],
        'replay-label': 'Burrow'
    },
    'CentrificalHooks': {},
    'zerglingattackspeed': {},
    'zerglingmovementspeed': {},
    'ZergFlyerWeaponsLevel1': {},
    'ZergFlyerWeaponsLevel2': {},
    'ZergFlyerWeaponsLevel3': {},
    'ZergFlyerArmorsLevel1': {},
    'ZergFlyerArmorsLevel2': {},
    'ZergFlyerArmorsLevel3': {},
    'ZergMissileWeaponsLevel1': {},
    'ZergMissileWeaponsLevel2': {},
    'ZergMissileWeaponsLevel3': {},
    'hydraliskspeed': {},
    'InfestorEnergyUpgrade': {},
    'NeuralParasite': {},
    'ChitinousPlating': {},
    'overlordspeed': {},
    'GlialReconstitution': {},
    'TunnelingClaws': {},

    'Baneling': {},
    'NydusWorm': {},
    'Zergling': {
        'tag': ['bulk']
    },
    'SwarmHost': {},

    'Mutalisk': {
        'tag': ['tech']
    },
    'Hydralisk': {
        'tag': ['tech']
    },
    'Infestor': {
        'tag': ['support']
    },
    'Queen': {},

    'Corruptor': {
        'tag': ['support']
    },
    'NydusCanal': {},
    'Drone': {},
    'Ultralisk': {
        'tag': ['support']
    },
    'Viper': {
        'tag': ['support']
    },
    'Ravager': {
        'tag': ['support']
    },
    'Overseer': {},
    'LurkerMP': {
        'tag': ['tech']
    },
    'Roach': {
        'tag': ['bulk']
    },
    'Overlord': {},
    'BroodLord': {},

    'Extractor': {},
    'UltraliskCavern': {},
    'SpineCrawler': {},
    'Lair': {},
    # 'Larva': {},
    'LurkerDenMP': {},
    'SporeCrawler': {},
    'BanelingNest': {},
    'EvolutionChamber': {},
    'Spire': {},
    'RoachWarren': {},
    'Hive': {},
    'Hatchery': {},
    'InfestationPit': {},
    'GreaterSpire': {},
    'NydusNetwork': {},
    'SpawningPool': {},
    'HydraliskDen': {},
}

protoss_units = {
    'ProtossGroundWeaponsLevel1': {},
    'ProtossGroundWeaponsLevel2': {},
    'ProtossGroundWeaponsLevel3': {},
    'ProtossGroundArmorsLevel1': {},
    'ProtossGroundArmorsLevel2': {},
    'ProtossGroundArmorsLevel3': {},
    'ProtossShieldsLevel1': {},
    'ProtossShieldsLevel2': {},
    'ProtossShieldsLevel3': {},
    'ProtossAirWeaponsLevel1': {},
    'ProtossAirWeaponsLevel2': {},
    'ProtossAirWeaponsLevel3': {},
    'ProtossAirArmorsLevel1': {},
    'ProtossAirArmorsLevel2': {},
    'ProtossAirArmorsLevel3': {},
    'PhoenixRangeUpgrade': {},
    'ObserverGraviticBooster': {},
    'ExtendedThermalLance': {},
    'PsiStormTech': {},

    'AdeptPiercingAttack': {
        'tag': ['upgrade-tech'],
        'replay-label': 'Glaives'
    },
    'Charge': {
        'tag': ['upgrade-tech'],
        'replay-label': 'Chargelot'
    },
    'BlinkTech': {
        'tag': ['upgrade-tech'],
        'replay-label': 'Blink'
    },

    'GraviticDrive': {},
    'CarrierLaunchSpeedUpgrade': {},
    'WarpGateResearch': {},

    'MothershipCore': {},
    'Observer': {},

    # 'Probe': {},
    # 'Pylon': {},

    'DarkTemplar': {
        'tag': ['tech'],
        'replay-label': 'DT',
        'threshold': 2
    },

    'Phoenix': {
        'tag': ['tech'],
        'threshold': 3
    },
    'Sentry': {
        # 'tag': ['support'],
        # 'threshold': 4
    },
    'Colossus': {
        'tag': ['support']
    },
    'Disruptor': {
        'tag': ['support']
    },
    'Mothership': {
        'tag': ['mothership']
    },

    'Adept': {
        'tag': ['bulk']
    },
    'Zealot': {
        'tag': ['bulk']
    },
    'Stalker': {
        # 'tag': ['support']
    },

    'Immortal': {
        'tag': ['support'],
        'threshold': 2
    },
    'HighTemplar': {
        'tag': ['support'],
        'replay-label': 'HT'
    },
    'WarpPrism': {
        'tag': ['support'],
        'replay-label': 'Prism'
    },
    'Oracle': {
        'tag': ['tech']
    },

    'RoboticsBay': {
        'tag': ['tech-path'],
        'replay-label': 'Robo'
    },
    'Stargate': {
        'tag': ['tech-path'],
        'replay-label': 'Stargate'
    },

    'Tempest': {
        'tag': ['tech']
    },
    'Archon': {
        'tag': ['tech']
    },
    'Carrier': {
        'tag': ['tech']
    },

    'VoidRay': {
        'tag': ['tech']
    },

    'TwilightCouncil': {},
    'TemplarArchive': {},
    'RoboticsFacility': {},
    'CyberneticsCore': {},
    'PhotonCannon': {},
    'WarpGate': {},
    'Forge': {},
    'Assimilator': {},
    'DarkShrine': {},
    'Nexus': {},
    'FleetBeacon': {},
    'Gateway': {},
}

ignore_killed = [
    'AdeptPhaseShift'
]

workers = [
    'Probe', 'SCV', 'Drone', 'MULE'
]

irrelevant_units = [
    'Pylon', 'Overlord', 'SupplyDepot'
]

races = {
    'Protoss': protoss_units,
    'Terran': terran_units,
    'Zerg': zerg_units
}

for units in races.itervalues():
    index = 0
    for unit in units.itervalues():
        unit['id'] = index
        index += 1


def has_tag(race, unit_name, tag):
    unit = races[race][unit_name]
    if 'tag' not in unit:
        return False
    return tag in unit['tag']


def is_bulk_unit(race, unit_name):
    return has_tag(race, unit_name, 'bulk')


def is_support_unit(race, unit_name):
    return has_tag(race, unit_name, 'support')


def match_threshold(race, unit_name, n):
    unit = races[race][unit_name]
    if 'threshold' not in unit:
        return True
    return n >= unit['threshold']


def get_replay_label(race, unit_name):
    unit = races[race][unit_name]
    if 'replay-label' not in unit:
        return unit_name
    return unit['replay-label']
